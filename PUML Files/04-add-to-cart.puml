@startuml Add to Cart Use Case
!theme plain
skinparam backgroundColor #f8f9fa

title Use Case: הוספת מוצר לעגלה (Add to Cart)

|User|
start
:משתמש בוחר מוצר;
:צפייה בפרטי המוצר;
:בחירת כמות רצויה;

|System|
:בדיקת זמינות המוצר במלאי;

if (המוצר זמין?) then (כן)
  if (המשתמש מחובר?) then (כן)
    |System|
    :הוספת המוצר לעגלה במסד הנתונים;
    :עדכון מונה העגלה;
    |User|
    :הצגת הודעת הצלחה;
    :עדכון אייקון העגלה;
  else (לא)
    |System|
    :שמירת המוצר בעגלה המקומית;
    |User|
    :הצגת הודעת הצלחה;
    :עדכון אייקון העגלה;
  endif
  
  if (רוצה להמשיך לקנות?) then (כן)
    :חזרה לדפדוף במוצרים;
  else (לא)
    :מעבר לעגלת הקניות;
  endif
  
else (לא)
  |User|
  :הצגת הודעה - המוצר אזל מהמלאי;
  :הצעת מוצרים דומים;
endif

stop

note right
  **Use Case:** הוספת מוצר לעגלה
  **Actor:** משתמש
  **תיאור:** הוספה לעגלת הקניות
  
  **תנאים מוקדמים:**
  - המוצר קיים במערכת
  - המוצר זמין במלאי
  
  **תוצאה מוצלחת:**
  - המוצר נוסף לעגלה
  - עדכון מונה העגלה
  - הודעת אישור למשתמש
  
  **תרחישי כשל:**
  - המוצר אזל מהמלאי
  - שגיאת רשת
  - כמות לא תקינה
  
  **הערות:**
  - עבור משתמשים לא מחוברים
    העגלה נשמרת מקומית
  - עבור משתמשים מחוברים
    העגלה נשמרת במסד הנתונים
end note

@enduml
