@startuml User Login Use Case
!theme plain
skinparam backgroundColor #f8f9fa

title Use Case: התחברות משתמש (User Login)

|User|
start
:משתמש נכנס לעמוד התחברות;
:מזין פרטי התחברות:
- כתובת דוא"ל
- סיסמה;

|System|
:בדיקת תקינות הנתונים;
if (הנתונים תקינים?) then (כן)
  :חיפוש משתמש במסד הנתונים;
  if (משתמש נמצא?) then (כן)
    :בדיקת סיסמה;
    if (סיסמה נכונה?) then (כן)
      :יצירת JWT Token;
      :שמירת Token בזיכרון המקומי;
      :עדכון סטטוס התחברות;
      |User|
      if (תפקיד המשתמש?) then (לקוח)
        :הפניה לעמוד הבית;
      else (מנהל)
        :הפניה לדשבורד ניהול;
      endif
      :הצגת הודעת ברוכים הבאים;
      stop
    else (לא)
      |User|
      :הצגת שגיאה - סיסמה שגויה;
      stop
    endif
  else (לא)
    |User|
    :הצגת שגיאה - משתמש לא נמצא;
    stop
  endif
else (לא)
  |User|
  :הצגת שגיאות תקינות;
  stop
endif

note right
  **Use Case:** התחברות משתמש
  **Actor:** משתמש
  **תיאור:** התחברות לחשבון באמצעות דוא"ל וסיסמה
  
  **תנאים מוקדמים:**
  - המשתמש רשום במערכת
  - המשתמש לא מחובר כרגע
  
  **תוצאה מוצלחת:**
  - המשתמש מחובר למערכת
  - נוצר JWT Token
  - הפניה לעמוד המתאים לתפקיד
  
  **תרחישי כשל:**
  - נתונים לא תקינים
  - משתמש לא קיים
  - סיסמה שגויה
  - חשבון חסום
end note

@enduml
